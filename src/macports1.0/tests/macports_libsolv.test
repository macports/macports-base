# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

package require tcltest 2
namespace import tcltest::*

set pwd [file dirname [file normalize $argv0]]

source ../macports_test_autoconf.tcl
package require macports 1.0

# Debug options
array set ui_options {}
mportinit ui_options

test libsolv_search {
    # Unit test for searching using libsolv.
    Unit test for libsolv search.
} -body {
    macports::libsolv::create_pool
    set solv "solv"
    set glob_res [macports::libsolv::search $solv 0 "glob"]
    set exact_res [macports::libsolv::search "libsolv" 0 "exact"]
    set regex_res [macports::libsolv::search $solv 0 "glob"]

    if {![info exists glob_res] || ![info exists exact_res] || ![info exists regex_res]} {
        return "FAIL: Search didn't run successfully for $solv or \"libsolv\""
    }

    return "Successfully searched using libsolv."
} -cleanup {
} -result "Successfully searched using libsolv."

cleanupTests
